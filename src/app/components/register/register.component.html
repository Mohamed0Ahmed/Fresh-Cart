<!--*  -->
<!--*  -->
<!--*  -->
<!--*  -->

<section>
  <form
    [formGroup]="registerForm"
    (ngSubmit)="handleForm()"
    class="bg-main-light p-4 mt-4"
  >
    <h3 class="fw-bold h2 py-3">Register Now</h3>

    <div class="form-item">
      <label for="name">Name :</label>
      <input
        formControlName="name"
        type="text"
        id="name"
        class="form-control"
      />
    </div>

    <div
      class="text-danger"
      *ngIf="
        (registerForm.get('name')?.touched ||
          registerForm.get('name')?.value != '') &&
        registerForm.get('name')?.errors
      "
    >
      <p
        class="opacity-75"
        *ngIf="registerForm.get('name')?.getError('required')"
      >
        Name is Required
      </p>
      <p
        class="opacity-75"
        *ngIf="registerForm.get('name')?.getError('minlength')"
      >
        Min length is 3
      </p>
      <p
        class="opacity-75"
        *ngIf="registerForm.get('name')?.getError('maxlength')"
      >
        Max length is 20
      </p>
    </div>

    <div class="form-item">
      <label for="mail">Email :</label>
      <input
        formControlName="email"
        type="email"
        id="mail"
        class="form-control"
      />
    </div>

    <div
      class="text-danger"
      *ngIf="
        (registerForm.get('email')?.touched ||
          registerForm.get('email')?.value != '') &&
        registerForm.get('email')?.errors
      "
    >
      <p
        class="opacity-75"
        *ngIf="registerForm.get('email')?.getError('email')"
      >
        Examble : xxx@gmail.com
      </p>
      <p
        class="opacity-75"
        *ngIf="registerForm.get('email')?.getError('required')"
      >
        Email is required
      </p>
    </div>

    <div class="form-item">
      <label for="password">Password :</label>
      <input
        formControlName="password"
        type="password"
        id="password"
        class="form-control"
      />
    </div>

    <div
      class="text-danger"
      *ngIf="
        (registerForm.get('password')?.touched ||
          registerForm.get('password')?.value != '') &&
        registerForm.get('password')?.errors
      "
    >
      <p
        class="opacity-75"
        *ngIf="registerForm.get('password')?.getError('pattern')"
      >
        Password must be atleast 6 chars
      </p>
      <p
        class="opacity-75"
        *ngIf="registerForm.get('password')?.getError('required')"
      >
        Password is required
      </p>
    </div>

    <div class="form-item">
      <label for="rePassword">Re Password :</label>
      <input
        formControlName="rePassword"
        type="password"
        id="rePassword"
        class="form-control"
      />
    </div>

    <div
      class="text-danger"
      *ngIf="
        (registerForm.get('rePassword')?.touched ||
          registerForm.get('rePassword')?.value != '') &&
        registerForm.get('rePassword')?.errors
      "
    >
      <p
        class="opacity-75"
        *ngIf="registerForm.get('rePassword')?.getError('missMatch')"
      >
        RePassword must be match Password
      </p>
      <p
        class="opacity-75"
        *ngIf="registerForm.get('rePassword')?.getError('required')"
      >
        RePassword is required
      </p>
    </div>

    <div class="form-item">
      <label for="phone">Phone Number :</label>
      <input
        formControlName="phone"
        type="tel"
        id="phone"
        class="form-control"
      />
    </div>

    <div
      class="text-danger"
      *ngIf="
        (registerForm.get('phone')?.touched ||
          registerForm.get('phone')?.value != '') &&
        registerForm.get('phone')?.errors
      "
    >
      <p
        class="opacity-75"
        *ngIf="registerForm.get('phone')?.getError('pattern')"
      >
        Invaild Number
      </p>
      <p
        class="opacity-75"
        *ngIf="registerForm.get('phone')?.getError('required')"
      >
        Number is Required
      </p>
    </div>

    <div class="d-flex justify-content-end">
      <button class="btn-main" type="submit" [disabled]="registerForm.invalid">
        Register
        <i *ngIf="isValid" class="fa-solid fa-spinner fa-spin"></i>
      </button>
    </div>
    <p *ngIf="errorMessage" class="alert alert-danger text-center">
      {{ errorMessage }}
    </p>
  </form>
</section>
